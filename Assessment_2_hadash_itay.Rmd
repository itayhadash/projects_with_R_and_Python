---
title: "Assesment_2_hadash_itay"
output: html_document
editor_options: 
  chunk_output_type: inline
---


### Submission Instructions:  
**For questions 1-4:**  
Please submit this Rmd file (with your answers) together with the html file that is outputted automatically by knitr when you knit the Rmd [here](https://moodle2.cs.huji.ac.il/nu19/mod/assign/view.php?id=248330).   
Please adhere to the following file format:    
`Assessment_2_familyName_Name.Rmd/html`   

**For questions 5:**    
Please follow the steps in the GitHub-Classroom assessment 2 [invitation](https://classroom.github.com/a/c6YKc9qd) to create your own assessment 2 repository. Once done, follow the steps in Q5. Your final push and merge will be the one to be considered for grading. **Please do not open/review other peoples' repositories - we will be notified by GitHub if you do.**

## Basic Data Wrangling:  

1. Load the most recent version of the `global confirmed Corona cases narrow data-set` from [here.](https://data.humdata.org/dataset/novel-coronavirus-2019-ncov-cases) What is the value of confirmed cases in Israel on the first of April, 2020?  

```{r,cache = TRUE}
data_corona <- read.csv(url("https://data.humdata.org/hxlproxy/data/download/time_series_covid19_confirmed_global_narrow.csv?dest=data_edit&filter01=merge&merge-url01=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2Fe%2F2PACX-1vTglKQRXpkKSErDiWG6ycqEth32MY0reMuVGhaslImLjfuLU0EUgyyu2e-3vKDArjqGX7dXEBV8FJ4f%2Fpub%3Fgid%3D1326629740%26single%3Dtrue%26output%3Dcsv&merge-keys01=%23country%2Bname&merge-tags01=%23country%2Bcode%2C%23region%2Bmain%2Bcode%2C%23region%2Bsub%2Bcode%2C%23region%2Bintermediate%2Bcode&filter02=merge&merge-url02=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2Fe%2F2PACX-1vTglKQRXpkKSErDiWG6ycqEth32MY0reMuVGhaslImLjfuLU0EUgyyu2e-3vKDArjqGX7dXEBV8FJ4f%2Fpub%3Fgid%3D398158223%26single%3Dtrue%26output%3Dcsv&merge-keys02=%23adm1%2Bname&merge-tags02=%23country%2Bcode%2C%23region%2Bmain%2Bcode%2C%23region%2Bsub%2Bcode%2C%23region%2Bintermediate%2Bcode&merge-replace02=on&merge-overwrite02=on&filter03=explode&explode-header-att03=date&explode-value-att03=value&filter04=rename&rename-oldtag04=%23affected%2Bdate&rename-newtag04=%23date&rename-header04=Date&filter05=rename&rename-oldtag05=%23affected%2Bvalue&rename-newtag05=%23affected%2Binfected%2Bvalue%2Bnum&rename-header05=Value&filter06=clean&clean-date-tags06=%23date&filter07=sort&sort-tags07=%23date&sort-reverse07=on&filter08=sort&sort-tags08=%23country%2Bname%2C%23adm1%2Bname&tagger-match-all=on&tagger-default-tag=%23affected%2Blabel&tagger-01-header=province%2Fstate&tagger-01-tag=%23adm1%2Bname&tagger-02-header=country%2Fregion&tagger-02-tag=%23country%2Bname&tagger-03-header=lat&tagger-03-tag=%23geo%2Blat&tagger-04-header=long&tagger-04-tag=%23geo%2Blon&header-row=1&url=https%3A%2F%2Fraw.githubusercontent.com%2FCSSEGISandData%2FCOVID-19%2Fmaster%2Fcsse_covid_19_data%2Fcsse_covid_19_time_series%2Ftime_series_covid19_confirmed_global.csv"),comment.char = "#")

good_data <- data_corona[c("Country.Region","Date","Value")]

israel <- good_data[which(good_data$Country.Region =="Israel"),]

israel[which(israel$Date=="2020-04-01"),]
  


```  
  
2. For each of the end of months (January, February, March), list the top 10 countries in terms of confirmed cases. For each month,  bar plot these top 10 countries using `plot` where the value of Corona cases is on the Y axes and the countries on the X axes. Add relevant title and labels.   

```{r}

good_data_agg <- aggregate(Value ~ Country.Region + Date ,data = good_data,FUN = sum)
march <- good_data_agg[which(good_data_agg$Date == "2020-03-31"),]
february <-good_data_agg[which(good_data_agg$Date == "2020-02-29"),]
january <- good_data_agg[which(good_data_agg$Date == "2020-01-31"),]

top_jan <- head(january[order(january$Value,decreasing = TRUE),],10)
top_feb <- head(february[order(february$Value,decreasing = TRUE),],10)
top_mar <- head(march[order(march$Value,decreasing = TRUE),],10)


jan_bar <- barplot(height = top_jan$Value,names.arg = top_jan$Country.Region,las=2,cex.names = 0.8,main = "January top 10 infected countries",ylab = "Number of cases",ylim = c(0,12000),cex.lab=1.5,cex.axis = 0.8)
text(jan_bar,y = as.vector(top_jan$Value),labels = as.vector(top_jan$Value),pos = 3,cex = 0.8)

feb_bar <- barplot(height = top_feb$Value,names.arg = top_feb$Country.Region,las=2,cex.names = 0.55,main ="February top 10 infected countries",ylab = "Number of cases",ylim = c(0,90000),cex.lab=1,cex.axis = 0.7)
text(feb_bar,y = as.vector(top_feb$Value),labels = as.vector(top_feb$Value),pos = 3,cex = 0.8,offset = 1)

mar_bar <- barplot(height = top_mar$Value,names.arg = top_mar$Country.Region,las=2,cex.names = 0.7,main ="March top 10 infected countries",ylab = "Number of cases",ylim = c(0,250000),cex.lab=1,cex.axis = 0.7)
text(mar_bar,as.vector(top_mar$Value),labels = as.vector(top_mar$Value),pos = 3,cex = 0.8,offset = 1)

```  

3. According to the data, which country was the last to be Corona free (zero Corona cases)?   
```{r}
all_zero <- good_data_agg[which(good_data_agg$Value == 0),]
date_sort <- head(all_zero[order(all_zero$Date,decreasing = TRUE),],10)
head(date_sort,1)
```  
  
4. Load the most recent version of the `global confirmed Corona deaths narrow data-set` from [here.](https://data.humdata.org/dataset/novel-coronavirus-2019-ncov-cases) For each end of month (January, February, March), list the top 10 countries in terms of deaths. Plot your findings similarly to the plot in Q2.  
```{r,cache = TRUE}
death_data <- read.csv(url("https://data.humdata.org/hxlproxy/data/download/time_series_covid19_deaths_global_narrow.csv?dest=data_edit&filter01=merge&merge-url01=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2Fe%2F2PACX-1vTglKQRXpkKSErDiWG6ycqEth32MY0reMuVGhaslImLjfuLU0EUgyyu2e-3vKDArjqGX7dXEBV8FJ4f%2Fpub%3Fgid%3D1326629740%26single%3Dtrue%26output%3Dcsv&merge-keys01=%23country%2Bname&merge-tags01=%23country%2Bcode%2C%23region%2Bmain%2Bcode%2C%23region%2Bsub%2Bcode%2C%23region%2Bintermediate%2Bcode&filter02=merge&merge-url02=https%3A%2F%2Fdocs.google.com%2Fspreadsheets%2Fd%2Fe%2F2PACX-1vTglKQRXpkKSErDiWG6ycqEth32MY0reMuVGhaslImLjfuLU0EUgyyu2e-3vKDArjqGX7dXEBV8FJ4f%2Fpub%3Fgid%3D398158223%26single%3Dtrue%26output%3Dcsv&merge-keys02=%23adm1%2Bname&merge-tags02=%23country%2Bcode%2C%23region%2Bmain%2Bcode%2C%23region%2Bsub%2Bcode%2C%23region%2Bintermediate%2Bcode&merge-replace02=on&merge-overwrite02=on&filter03=explode&explode-header-att03=date&explode-value-att03=value&filter04=rename&rename-oldtag04=%23affected%2Bdate&rename-newtag04=%23date&rename-header04=Date&filter05=rename&rename-oldtag05=%23affected%2Bvalue&rename-newtag05=%23affected%2Binfected%2Bvalue%2Bnum&rename-header05=Value&filter06=clean&clean-date-tags06=%23date&filter07=sort&sort-tags07=%23date&sort-reverse07=on&filter08=sort&sort-tags08=%23country%2Bname%2C%23adm1%2Bname&tagger-match-all=on&tagger-default-tag=%23affected%2Blabel&tagger-01-header=province%2Fstate&tagger-01-tag=%23adm1%2Bname&tagger-02-header=country%2Fregion&tagger-02-tag=%23country%2Bname&tagger-03-header=lat&tagger-03-tag=%23geo%2Blat&tagger-04-header=long&tagger-04-tag=%23geo%2Blon&header-row=1&url=https%3A%2F%2Fraw.githubusercontent.com%2FCSSEGISandData%2FCOVID-19%2Fmaster%2Fcsse_covid_19_data%2Fcsse_covid_19_time_series%2Ftime_series_covid19_deaths_global.csv"),comment.char = "#")
good_death_data <- death_data[c("Country.Region","Date","Value")]

good_death_data_agg <- aggregate(Value ~ Country.Region + Date ,data = good_death_data,FUN = sum)

march_d <- good_death_data_agg[which(good_death_data_agg$Date == "2020-03-31"),]
february_d <-good_death_data_agg[which(good_death_data_agg$Date == "2020-02-29"),]
january_d <- good_death_data_agg[which(good_death_data_agg$Date == "2020-01-31"),]

top_jan_d <- head(january_d[order(january_d$Value,decreasing = TRUE),],10)
top_feb_d <- head(february_d[order(february_d$Value,decreasing = TRUE),],10)
top_mar_d <- head(march_d[order(march_d$Value,decreasing = TRUE),],10)


jan_d_bar  <- barplot(height = top_jan_d$Value,names.arg = top_jan_d$Country.Region,las=2,cex.names = 0.6,main = "January top 10 Deaths per country",ylab = "Nunber of Deaths",ylim = c(0,1000),cex.lab=1.5)
text(jan_d_bar,y = as.vector(top_jan_d$Value),labels = as.vector(top_jan_d$Value),pos = 3,cex = 0.8)

feb_d_bar  <- barplot(height = top_feb_d$Value,names.arg = top_feb_d$Country.Region,las=2,cex.names = 0.55,main ="February top 10 Deaths per country",ylab = "Number of Deaths",ylim = c(0,10000),cex.lab=1,)
text(feb_d_bar,y = as.vector(top_feb_d$Value),labels = as.vector(top_feb_d$Value),pos = 3,cex = 0.8)

mar_d_bar <- barplot(height = top_mar_d$Value,names.arg = top_mar_d$Country.Region,las=2,cex.names = 0.7,main ="March top 10 Deaths per country",ylab = "Number of Deaths",ylim = c(0,14000),cex.lab=1.5,cex.axis = 0.8)
text(mar_d_bar,y = as.vector(top_mar_d$Value),labels =as.vector(top_mar_d$Value),pos = 3,cex = 0.8 )


``` 


## GitHub Walk-Through:  

1. Please follow the steps in the GitHub-Classroom assessment 2 [invitation](https://classroom.github.com/a/c6YKc9qd) to create your own assessment 2 repository. Please clone the repository to your local computer using the `git clone` command (you must get inside the repository directory once you clone it using `cd`).   
2. In your local assignment repository, please create a new branch called `firstName_branch` using `git branch`. Checkout to this branch using `git checkout`, and finally change the upstream origin to this branch using `git push --set-upstream origin [name]_branch`.    
3. In your new branch, please create a simple (non Rmd) R file named `assessment_2_FamName_Name.R`, that prints `Hello World` when executed. 
4. Add the file to git using `git add`.  
5. Commit your changes with a comment that contains the date of your commit, together with your full name (using `git commit -m "message"`).   
6. Push your changes to your branch using `git push`. Verify using `git status`.   
7. Return to your master branch using `git checkout`, make sure that it is up to date with `git pull`, and then merge your branch to master using `git merge`. Finally, you should finalize this merge to master using `git push`.    
8. For good measure, make sure your repository is up-to-date and everything was synced and merged. 
  
  **It helps to use `git status` during the various steps to verify the status of the repository. **   
  
      
        
### Good Luck!  
